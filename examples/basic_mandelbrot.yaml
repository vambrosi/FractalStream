viewer:
  title: Mandelbrot set
  style: complex-plane
  size: 512x512
  resizable: true
  z-coord: C
  initial-center: 0
  initial-pixel-size: 1/128
  code: |
      # We want to follow the critical point
      z : C <- 0

      # Iterate until z escapes or we repeat max_iters times
      k : Z <- 0
      while k < max_iters and |z| < escape_radius
        z <- z^2 + C
        k <- k + 1

      # Color points that failed to escape black, and
      # for other points use a gradient between red and yellow.
      if k = max_iters then
        output black to color
      else
        output blend ((k/max_iters)^p, red, yellow) to color

configuration:
  title: Configuration
  size: 400x200
  vertical-contents:
    - text-entry:
        label: "Max. iterations:"
        value: "100"
        type: Z
        variable: max_iters
    - text-entry:
        label: "Escape radius:"
        value: 10
        type: R
        variable: escape_radius
    - text-entry:
        label: "Brightness: "
        value: 0.5
        type: R
        variable: p
