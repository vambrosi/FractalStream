viewer:
  title: Bifurcation diagram for the logistic map
  style: complex-plane
  size: 512x512
  resizable: true
  z-coord: z
  pixel-size: px
  initial-center: 0
  initial-pixel-size: 1/128
  code: |
      x : R <- im(z)
      x0 : R <- x
      r : R <- re(z)
      k : Z <- 0
      best : R <- outer
      while k < warmup
        x <- r x (1 - x)
        k <- k + 1
      k <- 0
      while k < max_iters and |x - x0| > tol
        x <- r x (1 - x)
        k <- k + 1
        if |x - x0| < best then
          best <- |x - x0|
      output blend(best / outer, white, black) to color

configuration:
  title: Configuration
  size: 400x200
  vertical-contents:
    - text-entry:
        label: "tolerance: "
        value: "0.0001"
        type: R
        variable: tol
    - text-entry:
        label: "outer tolerance: "
        value: "0.01"
        type: R
        variable: outer
    - text-entry:
        label: "Max. iterations:"
        value: "1000"
        type: Z
        variable: max_iters
    - text-entry:
        label: "Warmup iterations:"
        value: "1000"
        type: Z
        variable: warmup
