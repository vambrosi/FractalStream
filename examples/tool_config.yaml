viewer:
  title: Julia set
  style: complex-plane
  size: 512x512
  resizable: true
  z-coord: z
  iteration-limit: max_iters
  escape-radius: escape_radius
  initial-center: 0
  initial-pixel-size: 1/128
  code: |
    iterate z -> z^2 + C until z escapes
    if stuck:
      color <- black
    else:
      color <- blend ((iterations / max_iters)^p, dark blue, white)

  tools:
    - name: Demo
      shortcut: x
      configuration:
        title: Demo tool
        size: 400x200
        vertical-contents:
          - text-entry:
              label: "R ="
              value: "1"
              type: R
              variable: R
          - text-entry:
              label: "Î¸ ="
              value: "pi/4"
              type: R
              variable: theta
      actions:
        - event: refresh
          code: |
            erase
            draw circle at 0 with radius R
            draw line from 0 to R e^{i theta}
            # Refresh events aren't able to change
            # configuration variables, so this next
            # line will have no effect.
            R <- R + 0.001
        - event: deactivated
          code: erase

    - name: Trace
      shortcut: t
      actions:
        - event: click-or-drag
          code: |
            prevZ : C <- z
            erase
            while |z| < 10 escape_radius up to 100 times:
              prevZ <- z
              draw point at z
              z <- z^2 + C
              draw line from z to prevZ

configuration:
  title: Configuration
  size: 400x200
  vertical-contents:
    - text-entry:
        label: "f(z) = z^2 +"
        value: "-0.11 + 0.78i"
        type: C
        variable: C
    - text-entry:
        label: "Max. iterations:"
        value: "100"
        type: Z
        variable: max_iters
    - text-entry:
        label: "Escape radius:"
        value: 10
        type: R
        variable: escape_radius
    - text-entry:
        label: "Brightness: "
        value: 0.5
        type: R
        variable: p
