configuration:
  title: Configuration
  size: 400x200
  vertical-contents:
    - checkbox:
        label: "Use Arenberg rainbow"
        value: false
        variable: use_arenberg
    - text-entry:
        label: "Iterations per color cycle: "
        value: 20
        type: R
        variable: speed
    - text-entry:
        label: "f(z) = z² +"
        value: "-0.11 + 0.78i"
        type: ℂ
        variable: C

viewers:
  - title: Reference
    style: complex-plane
    size: 640x32
    resizable: true
    z-coord: z
    escape-radius: "10"
    iteration-limit: "100"
    initial-center: 0
    initial-pixel-size: 1/128
    code: |
        color ⭠ if use_arenberg then arenberg(re z / 4) else rainbow(re z / 4)

  - title: Parameter plane
    style: complex-plane
    size: 512x512
    resizable: true
    z-coord: C
    escape-radius: "10"
    iteration-limit: "100"
    initial-center: 0
    initial-pixel-size: 1/128
    code: |
      z : ℂ ⭠ 0
      iterate z ⟼ z² + C until z escapes

      color ⭠ black
      if z escapes:
        m : ℝ ⭠ iterations + 1 - log (log (|z|²) / (2 log 10)) / log 2
        color ⭠ if use_arenberg then arenberg(m / speed) else rainbow(m / 20)

  - title: Dynamical plane
    style: complex-plane
    size: 512x512
    resizable: true
    z-coord: z
    escape-radius: "10"
    iteration-limit: "100"
    initial-center: 0
    initial-pixel-size: 1/128
    code: |
      iterate z ⟼ z² + C until z escapes

      color ⭠ black
      if z escaped:
        m : ℝ ⭠ iterations + 1 - log (log (|z|²) / (2 log 10)) / log 2
        color ⭠ if use_arenberg then arenberg(m / speed) else rainbow(m / 20)
